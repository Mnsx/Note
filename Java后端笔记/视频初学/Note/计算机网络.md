# 计算机网络概述

* 计算机网络的功能和目的

  通信、资源共享

* 世界上第一个网络

  ARPANET

* 三网合一

  电信网络、有线电视、计算机网络

* 网络协议三要素

  语义、语法、同步

* 计算机网络分类

  LAN（局域网） < MAN（城域网） < WAN（广域网）

# 网络参考模型

* ISO和OSI的区别

  OSI——》开放式参考模型

  ISO——》国际标准化组织

* OSI七层协议（从上往下）

    * 应用层

      离用户最近

      应用层协议——FTP、DNS、HTTP、HTTPS、Telnet、TFTP、SMTP、SNMP

    * 表示层

      格式编码、加密/解密、压缩/解压缩

    * 会话层

    * 传输层

      实现端到端的连接

      TCP——》可靠的连接

      UDP——》不可靠的连接

    * 网络层

      网络层协议——IP、ARP、ICMP、IGMP、RARP

      物理设备——路由器、三层交换机

      交换、寻址、选路

      IP地址为标识

    * 数据链路层

      物理设备——交换机、网桥、网卡

      MAC地址为标识

    * 物理层

      物理设备——中继器、集线器、网卡

      传输介质——光纤（昂贵）>双绞线（常用）>同轴电缆

* TCP/IP模型四层模型

    * 应用层（应用层、表示层、会话层）
    * 传输层
    * 网际层
    * 网络访问层（数据链路层、物理层）

# 循环冗余码CRC解题万能公式

1. 根据多项式确定除数
2. 根据生成多项式的最高阶项信息位补0
3. 补0后的信息位与除数进行异或运算，得到余数
4. 将余数补全，放在原信息位后面

> p(x) = x^3+1 M = 11001001
>
> 第一步
>
> 通过x^3+1(1\*x^3 + 0\*x^2 + 0\*x + 1)推导出除数1001
>
> 第二步
>
> 根据多项式的最高阶也就是x^3得出需要给信息位补3个0
>
> 11001001000
>
> 第三步
>
> 将补0后的信息位与除数进行异或运算
>
> 得到011
>
> 第四步
>
> 将011放到原信息位中——》11001001011

# IP地址

32位二进制数组成，4个字节，一个字节8位

* A类地址

  网络位占8位，主机位占24位

  0.0.0.0 - 127.255.255.255

* B类地址

  网络位占16位，主机位占16位

  128.0.0.0 - 191.255.255.255

* C类地址

  网络位占24位，主机位占8位

  192.0.0.0 - 223.255.255.255

* D类地址

  组播地址

  224.0.0.0 - 239.255.255.255

* E类地址

  保留地址

  240.0.0.0 - 255.255.255.255

**特殊**

私有地址——

A：10.0.0.0 - 10.255.255.255

B：172.16.0.0 - 172.31.255.255

C：192.168.0.0 - 192.169.255.255

0.0.0.0 表示没有指定IP地址

255.255.255.255 表示所有主机

127.0.0.1 表示本机地址

169.254.xxx.xxx 表示DHCP动态分配服务器出现问题

# 子网划分

1. 需要划分子网个数，确定地址空间
2. 获取借位数n和m的获取（2^n >= 子网个数，2^m >= 地址空间）
3. 通过2^n求出真实子网个数，通过2^m求出真实地址空间，通过真实地址空间划分出子网

网络地址——》子网的起始地址

广播地址——》子网的结束地址

子网掩码——》网络位全为1，主机位全为0（要考虑借位的情况）

> Ip地址：192.3.2.0 子网个数：5个子公司 地址空间：28
>
> 第一步
>
> 子网个数：5
>
> 地址空间：28
>
> 第二步
>
> 2^3 >= 5
>
> 2^5 >= 28
>
> n = 3 m = 5
>
> 第三步
>
> 子网个数8 地址空间为32
>
> 子网地址——
>
> 32-63、64-95、96-127、128-159、160-191、192-223、224-255
>
> 子网掩码——
>
> 255.255.255.11100000

# 路由及路由协议

* 直连路由

  优先级为0

  ![image-20220604101332104](..\Picture\计算机网络\直连路由.png)

* 静态路由

  优先级为60

  ![image-20220604101817477](..\Picture\计算机网络/静态路由.png)

* 动态路由

    * RIP

      有距离限制——》15次转发

      优先级为100

    * OSPF

      没有距离矢量

      基于链路状态选择

      优先级为10

* 默认路由

  在没有选择其他的路由方式时

  ![image-20220604102246158](..\Picture\计算机网络\默认路由.png)

# TCP的三次握手和四次挥手

![image-20220604102806178](..\Picture\计算机网络\TCP数据包格式.png)

* URG：紧急 = 1
* ACK：确认 = 1
* PSH：推送 = 1
* RST：重置 = 1
* SYN：同步 = 1
* FIN：释放 = 1

![TCP三次握手四次挥手](../picture/计算机网络/TCP三次握手四次挥手.png)

# 数据包划分

题目给出数据部分字节量x，MTV = m，求MF、DF、偏移量

MTV = IP头部（20字节） + 数据部分

MF = 1 后面还有分层

​ = 0 后面没有分层

DF = 1 允许进行分层

​ = 0 不允许进行分层

偏移量 = 初始编号 / 8

第一部分——

数据部分只有m - 20字节

初始编号为0，结束编号为m - 20 - 1

偏移量：0

MF：1

DF：0

第二部分——

初始编号为m - 20，结束编号为2 \* m - 40 - 1

...

# TCP和UDP的异同

TCP是传输控制协议

UDP是用户数据报协议

**区别**

1. TCP可靠、UDP不可靠
2. TCP传输过程中需要连接、UDP是无连接的
3. TCP在传输过程中有可靠性保障的（三次握手、四次挥手、超时重发、流量控制）、UDP没有可靠性保障
4. TCP是安全的适用于需要高安全性的环境，UDP适用于需要快速传输、安全保障不高的环境
5. TCP头部有序号、确认号、UDP头部有长度、校验
6. TCP有三次握手、UDP没有

**相同**

1. 都是传输层
2. 都需要打开端口号

# 其他补充常用知识点

1. 服务器端口号

    * FTP文件服务
        * 数据端口20（主动模式）
        * 控制端口21
    * TELNET远程登录端口23
    * SMTP简单邮件传输端口25
    * DNS域名服务53
    * TFTP简单文件传输69
    * HTTP超文本传输80
    * SNMP简单网络管理161
    * HTTPS超文本传输（安全）443

2. VLAN技术

   隔离广播域

   在数据包中加上一个Tag，通过Tag来判定不同的局域网

   Tag分类方式

    1. 基于端口划分
    2. 基于MAC划分
    3. 基于IP子网划分
    4. 基于协议划分
    5. 基于策略划分

3. STP生成树协议

   将一个环路拓扑修改成一个树状结构拓扑（防止生成环结构）

   RSTP（快生成树）

   MSTP（多生成树）

4. 拓扑结构

   ![image-20220604110914051](..\Picture\计算机网络\拓扑结构.png)

5. 交换技术

    * 电路交换——建立连接
    * 分组交换——不需要建立连接
    * 报文交换——不需要建立连接

6. CSMA/CD

   在共享链路避免冲突的方法

   先检测是否有数据在传输，如果没有就边发边监听，当有其他的数据想要发送数据，那么就会冲突停发，然后随机延迟发送

![image-20220604111850688](..\Picture\计算机网络\CSMA.png)

7. MAC地址

   编号唯一（6个字节组成）

   前三个字节是国际机构划分给不同机构的编号

   后三个字节是机构分发的编号
